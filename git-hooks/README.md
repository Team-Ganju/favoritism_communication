## git/hooks/pre-commitでコミット前にチェックする

### 目的

- レイアウト崩れを目視で確認する以外にコーディング時のtypo、Lintチェックエラー、ビルドエラー等ミスやエラーをプログラム上判別できるものはできるだけ自動化し手間を省きたいです。
- Github Actionsでこれらをチェックしてもいいですが、そもそもセルフレビューの時点でチェックでき、修正した方が良いことと思ったため、コミット直前にスクリプトを実行することができるpre-commitのスクリプトを導入することにしました。

### 導入方法

- 下記コマンドで指定ディレクトリから[スクリプト](./pre-commit)をコピーしてください。

※プロジェクトルートディレクトリで実行することを想定しています。

```
// pre-commitスクリプトファイルを指定ディレクトリにコピーします
cp -rf git-hooks/pre-commit .git/hooks/

// 念の為、実行権限追加します
chmod +x .git/hooks/pre-commit
```

- `${PROJECT_ROOT}/.git/hooks/`ディレクトリにpre-commitスクリプトがコピーされていることを確認してください

- コミット直前にスクリプトが実行されることを動作確認してください

※Androidの初回ビルド時に赤字でファイル名が出ることがありますが、
apkファイルが作成されていれば問題ありません。

※iOSは初回ビルド時にMACのパスワード入力を求められることがあるので、  
スクショのようなダイアログがでたらパスワードを入力して常に許可を選択してください

<img width="434" alt="68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3232313834352f33313934633734312d626433342d326534622d616535352d3030653463373939643338362e706e67" src="https://user-images.githubusercontent.com/25321380/235291605-fa464b5c-9e26-4413-b847-acd2ff328bbf.png">

### git/hooks/pre-commitでチェックしていること

- `main`または`develop`ブランチにコミットしようとしてないか
- lintチェックに引っかからないか
- apkファイルを作成した時エラーにならないか
    - androidのビルドチェック
- ipaファイルを作成した時エラーにならないか
    - iOSのビルドチェック